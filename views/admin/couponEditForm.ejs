<%- include('../partials/adminHeader') %>

    <section class="content-main">
        
        <div class="row">
            <div class="col-8">
                <div class="content-header">
                    <h2 class="content-title">Edit Coupon Info: <%=cData.code %></h2>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-6">
                <div class="card mb-4">
                    <form action="/admin/couponPost" method="post"  >
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-3">
                                <!-- <form action="/admin/addProductPost" method="post" enctype="multipart/form-data"> -->
                                <!-- <h6>1. General info</h6> -->
                            </div>
                            <div class="col-md-12">
                                <div class="mb-4">
                                    <label class="form-label">Coupon Name:</label>
                                    <input type="text" placeholder=<%=cData.name %> name="couponName" class="form-control" >
                                </div>
                                <div class="mb-4">
                                    <label class="form-label">Discount Percent</label>
                                    <input type="text" placeholder=<%=cData.discount %> name="discount" class="form-control">
                                </div>
                                <div class="mb-4">
                                    <label class="form-label">Minimum Purchase Amount</label>
                                    <input type="text" placeholder=<%=cData.minTotalPrice %> name="minTotalPrice" class="form-control">
                                </div>
                                <div class="mb-4">
                                    <label class="form-label">Maximum Discount Amount</label>
                                    <input type="text" placeholder=<%=cData.maxDiscount%> name="maxDiscount" class="form-control">
                                </div>
                                <div class="mb-4 col-md-4">
                                    <label class="form-label">Expiry Date</label>
                                    <% const mongoDate=cData.expirationDate; %>
                                
                                        <% const dateObj=new Date(mongoDate); %>
                                            <% const year=dateObj.getFullYear(); %>
                                                <% const month=(dateObj.getMonth() + 1).toString().padStart(2, "0" ); %>
                                                    <% const day=dateObj.getDate().toString().padStart(2, "0" ); %>
                                                    <input type="date" name="expiryDate" class="form-control" value="<%= `${year}-${month}-${day}` %>">
                                                   
                                </div>
                            <div class="col-md-9">
                                
                                <div>
                                    <button class="btn btn-md rounded font-sm hover-up" type="submit">Generate Coupon </button>
                                </div>
                            </div> <!-- col.// -->
                        </div> <!-- .row end// -->
                    </div>
                </form>
                </div>
            </div>
        </div>
        </div>
    </section> <!-- content-main end// -->
    <script>
        $(document).ready(function() {
  // Listen for the form submission
  $('form').submit(function(event) {
    // Prevent the default form submission
    event.preventDefault();

    // Get the form data
    var formData = $(this).serialize();

    // Send the AJAX request
    $.ajax({
      url: $(this).attr('action'),
      type: $(this).attr('method'),
      data: formData,
      success: function(response) {
        // Handle the success response
        console.log("hello"+response.code);
        swal("Success!", "Coupon Code: "+response.code, "success").then(()=>{
            location.reload();
        });
        

      },
      error: function(xhr, status, error) {
        // Handle the error response
        console.log(xhr.responseText);
      }
    });
  });
});

    </script>
    <footer class="main-footer font-xs">
       
    </footer>
    </main>
    <script src="assets/js/vendors/jquery-3.6.0.min.js"></script>
    <script src="assets/js/vendors/bootstrap.bundle.min.js"></script>
    <script src="assets/js/vendors/select2.min.js"></script>
    <script src="assets/js/vendors/perfect-scrollbar.js"></script>
    <script src="assets/js/vendors/jquery.fullscreen.min.js"></script>
    <!-- Main Script -->
    <script src="assets/js/main.js" type="text/javascript"></script>
    </body>


    <!-- Mirrored from wp.alithemes.com/html/evara/evara-backend/page-form-product-2.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 01 Aug 2021 15:33:32 GMT -->

    </html>